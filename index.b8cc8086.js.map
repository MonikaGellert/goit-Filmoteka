{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,kDASA,MAAMC,EAAaC,SAASC,cAAc,gBACpCC,EAAQF,SAASC,cAAc,uBAC/BE,EAAYH,SAASC,cAAc,kBAEnCG,EAAUJ,SAASC,cAAc,gBAGvCF,EAAWM,iBAAiB,UA+C5BC,eAA2BC,GACzBA,EAAIC,iBACJ,IACE,MAGMC,QAHqBZ,EAAAa,kBAAsBR,EAAMS,MAAO,GAM9DR,EAAUS,UAAY,GACtBR,EAAQS,UAAUC,OAAO,UACzBC,EAAIN,GAAQO,KAAIC,IACdpB,EAAAqB,gBACmBD,GAChBE,MAAKC,IACJC,EAAgBD,EAAA,IAEjBE,OAAMC,GAASC,QAAQD,MAAMA,IAAA,GAIpC,CAFE,MAAOA,GACPC,QAAQC,IAAIF,EACd,CACAnB,EAAQS,UAAUa,IAAI,UACtBxB,EAAMS,MAAQ,EAChB,IAtEAR,EAAUE,iBAAiB,SA0F3BC,eAA4BC,GAC1BA,EAAIC,iBACJ,IACE,MAAMmB,QAAiB9B,EAAAqB,gBAAoBX,EAAIqB,OAAOC,IACtDC,EAAAC,mBAAiCJ,EAGnC,CAFE,MAAOJ,GACPC,QAAQC,IAAIF,EACd,CACF,IA/FAnB,EAAQS,UAAUa,IAAI,UACtB,MAAML,EAAkBD,IACtB,IAAIY,EAASnC,EAAAoC,QAAcb,EAAKc,YACR,MAApBd,EAAKc,aAA2CC,MAApBf,EAAKc,cACnCF,EAAS,4DAGX,MAAMI,EAAS,qEAEsBJ,sCACnCZ,EAAKiB,kBACMjB,EAAKiB,cAAcjB,EAAKS,kHAI7BT,EAAKiB,+EAGLC,EAAOlB,QAAWA,EAAKmB,aAAaC,MAAM,KAAK,6CAKvDrC,EAAUsC,mBAAmB,YAAaL,EAAA,EAGtCrB,EAAMN,IACV,MAAMiC,EAAW,GACjB,IAAK,MAAMC,KAASlC,EAClBiC,EAASE,KAAKD,EAAMd,IAEtB,OAAOa,CAAA,EAGIJ,EAASlB,IACpB,MAAMyB,EAAgB,GACtB,IAAK,MAAMC,KAAS1B,EAAK2B,OACvBF,EAAcD,KAAKE,EAAME,MAG3B,OAAOH,EAAcI,KAAK,QA4B5B3C,eAAgC4C,GAC9B,IACE9C,EAAQS,UAAUC,OAAO,UACzB,MAAMqC,QAAqBtD,EAAAuD,YAAgBF,GAE3CnC,EADeoC,GACHnC,KAAIC,IACdpB,EAAAqB,gBACmBD,GAChBE,MAAKC,IACJC,EAAgBD,EAAA,IAEjBE,OAAMC,GAASC,QAAQD,MAAMA,IAAA,GAIpC,CAFE,MAAOA,GACPC,QAAQC,IAAIF,EACd,CACAnB,EAAQS,UAAUa,IAAI,SACxB,CAaA2B","sources":["src/index.js"],"sourcesContent":["/************************************************************************************************************************************************/\nimport * as api from './JS/api_films_database';\nimport * as filmsCard from './JS/film_cards';\nimport * as functionsProject from './JS/info_functions';\nimport * as modalCardFilm from './JS/modal_card_film';\nimport * as studentsInfo from './JS/modal_footer';\nimport './sass/main.scss';\n\n/************************************************************************************************************************************************/\nconst searchForm = document.querySelector('#search-form');\nconst input = document.querySelector('.search-form__input');\nconst cardsFilm = document.querySelector('.section-films');\n//const studentsModal = document.querySelector('#studentsModal');\nconst spinner = document.querySelector('.loader__div');\n\n/************************************************************************************************************************************************/\nsearchForm.addEventListener('submit', searchFilms);\ncardsFilm.addEventListener('click', openCardFilm);\n//studentsModal.addEventListener('click', openCardFilm);\n/************************************************************************************************************************************************/\nspinner.classList.add('hidden');\nconst createFilmCards = film => {\n  let imgSRC = api.IMG_URL + film.poster_path;\n  if (film.poster_path == null || film.poster_path == undefined) {\n    imgSRC = 'https://www.freeiconspng.com/uploads/no-image-icon-6.png';\n  }\n\n  const markup = `\n  <div class=\"film-card\">\n    <img class=\"film-card__img\" src=\"${imgSRC}\" alt=\" Poster of a movie titled '${\n    film.title\n  }'\" title=\"${film.title}\" ID=\"${film.id}\" loading=\"lazy\"/>\n\n    <div class=\"film-card__info\">\n        <p class=\"film-card__info--title\">\n        ${film.title}\n        </p>\n        <p class=\"film-card__info--subtitle\">\n        ${genres(film)} | ${film.release_date.split('-')[0]}\n        </p>\n    </div>\n</div>\n</a>`;\n  cardsFilm.insertAdjacentHTML('beforeend', markup);\n};\n\nconst ids = movies => {\n  const arrOdIds = [];\n  for (const movie of movies) {\n    arrOdIds.push(movie.id);\n  }\n  return arrOdIds;\n};\n\nexport const genres = film => {\n  const arrayOfGenres = [];\n  for (const genre of film.genres) {\n    arrayOfGenres.push(genre.name);\n  }\n  \n  return arrayOfGenres.join(', ');\n};\n\nasync function searchFilms(eve) {\n  eve.preventDefault();\n  try {\n    const popularFilms = await api.fetchMoviesByName(input.value, 1);\n\n    \n    const movies = popularFilms;\n    \n   \n    cardsFilm.innerHTML = '';\n    spinner.classList.remove('hidden');\n    ids(movies).map(index => {\n      api\n        .fetchMoviesByID(index)\n        .then(film => {\n          createFilmCards(film);\n        })\n        .catch(error => console.error(error));\n    });\n  } catch (error) {\n    console.log(error);\n  }\n  spinner.classList.add('hidden');\n  input.value = '';\n}\nasync function loadPopularFilms(page) {\n  try {\n    spinner.classList.remove('hidden');\n    const popularFilms = await api.fetchMovies(page);\n    const movies = popularFilms;\n    ids(movies).map(index => {\n      api\n        .fetchMoviesByID(index)\n        .then(film => {\n          createFilmCards(film);\n        })\n        .catch(error => console.error(error));\n    });\n  } catch (error) {\n    console.log(error);\n  }\n  spinner.classList.add('hidden');\n}\n\nasync function openCardFilm(eve) {\n  eve.preventDefault();\n  try {\n    const infoFilm = await api.fetchMoviesByID(eve.target.id);\n    modalCardFilm.createModalContent(infoFilm);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n/************************************************************************************************************************************************/\nloadPopularFilms();\n"],"names":["$5zJd0","parcelRequire","$1cb340a3d58589e5$var$searchForm","document","querySelector","$1cb340a3d58589e5$var$input","$1cb340a3d58589e5$var$cardsFilm","$1cb340a3d58589e5$var$spinner","addEventListener","async","eve","preventDefault","movies","fetchMoviesByName","value","innerHTML","classList","remove","$1cb340a3d58589e5$var$ids","map","index","fetchMoviesByID","then","film","$1cb340a3d58589e5$var$createFilmCards","catch","error","console","log","add","infoFilm","target","id","$hfaIS","createModalContent","imgSRC","IMG_URL","poster_path","undefined","markup","title","$1cb340a3d58589e5$export$be3a0ca764f9df2b","release_date","split","insertAdjacentHTML","arrOdIds","movie","push","arrayOfGenres","genre","genres","name","join","page","popularFilms","fetchMovies","$1cb340a3d58589e5$var$loadPopularFilms"],"version":3,"file":"index.b8cc8086.js.map"}