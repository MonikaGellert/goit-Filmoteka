{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,kDASA,MAAMC,EAAaC,SAASC,cAAc,gBACpCC,EAAQF,SAASC,cAAc,uBAC/BE,EAAYH,SAASC,cAAc,kBAKzCF,EAAWK,iBAAiB,UAyC5BC,eAA2BC,GACzBA,EAAIC,iBACJ,IACE,MAAMC,QAAqBX,EAAAY,kBAAsBP,EAAMQ,MAAO,GAC9DC,QAAQC,IAAIJ,GACZ,MAAMK,EAASL,EAAaM,QAC5BH,QAAQC,IAAIC,GACZV,EAAUY,UAAY,GACtBC,EAAIH,GAAQI,KAAIC,IACdrB,EAAAsB,gBACmBD,GAChBE,MAAKC,IACJC,EAAgBD,EAAA,IAEjBE,OAAMC,GAASb,QAAQa,MAAMA,IAAA,GAIpC,CAFE,MAAOA,GACPb,QAAQC,IAAIY,EACd,CACAtB,EAAMQ,MAAQ,EAChB,IA5DAP,EAAUC,iBAAiB,SA8E3BC,eAA4BC,GAC1BA,EAAIC,iBACJ,IACE,MAAMkB,QAAiB5B,EAAAsB,gBAAoBb,EAAIoB,OAAOC,IACtDC,EAAAC,mBAAiCJ,EAGnC,CAFE,MAAOD,GACPb,QAAQC,IAAIY,EACd,CACF,IAlFA,MAAMF,EAAkBD,IACtB,MAAMS,EAAS,qGAEsDT,EAAKU,qBACxEV,EAAKW,oBACKX,EAAKY,cAAcZ,EAAKM,kHAI5BN,EAAKY,+EAGLC,EAAOb,QAAWA,EAAKc,aAAaC,MAAM,KAAK,6CAKvDjC,EAAUkC,mBAAmB,YAAaP,EAAA,EAGtCd,EAAMH,IACV,MAAMyB,EAAW,GACjB,IAAK,MAAMC,KAAS1B,EAClByB,EAASE,KAAKD,EAAMZ,IAEtB,OAAOW,CAAA,EAGIJ,EAASb,IACpB,MAAMoB,EAAgB,GACtB,IAAK,MAAMC,KAASrB,EAAKsB,OACvBF,EAAcD,KAAKE,EAAME,MAE3B,OAAOH,EAAcI,KAAK,QAwB5BxC,eAAgCyC,GAC9B,IACE,MACMjC,SADqBhB,EAAAkD,YAAgBD,IACfhC,QAC5BE,EAAIH,GAAQI,KAAIC,IACdrB,EAAAsB,gBACmBD,GAChBE,MAAKC,IACJC,EAAgBD,EAAA,IAEjBE,OAAMC,GAASb,QAAQa,MAAMA,IAAA,GAIpC,CAFE,MAAOA,GACPb,QAAQC,IAAIY,EACd,CACF,CAaAwB","sources":["src/index.js"],"sourcesContent":["/************************************************************************************************************************************************/\nimport * as api from './JS/api_films_database';\nimport * as filmsCard from './JS/film_cards';\nimport * as functionsProject from './JS/info_functions';\nimport * as modalCardFilm from './JS/modal_card_film';\nimport * as studentsInfo from './JS/modal_footer';\nimport './sass/main.scss';\n\n/************************************************************************************************************************************************/\nconst searchForm = document.querySelector('#search-form');\nconst input = document.querySelector('.search-form__input');\nconst cardsFilm = document.querySelector('.section-films');\n//const studentsModal = document.querySelector('#studentsModal');\n// const spinner = document.querySelector('.loader__div');\n\n/************************************************************************************************************************************************/\nsearchForm.addEventListener('submit', searchFilms);\ncardsFilm.addEventListener('click', openCardFilm);\n//studentsModal.addEventListener('click', openCardFilm);\n/************************************************************************************************************************************************/\n\nconst createFilmCards = film => {\n  const markup = `\n  <div class=\"film-card\">\n    <img class=\"film-card__img\" src=\"https://image.tmdb.org/t/p/w500/${film.poster_path}\" alt=\"${\n    film.overview\n  }\" title=\"${film.title}\" ID=\"${film.id}\" loading=\"lazy\"/>\n\n    <div class=\"film-card__info\">\n        <p class=\"film-card__info--title\">\n        ${film.title}\n        </p>\n        <p class=\"film-card__info--subtitle\">\n        ${genres(film)} | ${film.release_date.split('-')[0]}\n        </p>\n    </div>\n</div>\n</a>`;\n  cardsFilm.insertAdjacentHTML('beforeend', markup);\n};\n\nconst ids = movies => {\n  const arrOdIds = [];\n  for (const movie of movies) {\n    arrOdIds.push(movie.id);\n  }\n  return arrOdIds;\n};\n\nexport const genres = film => {\n  const arrayOfGenres = [];\n  for (const genre of film.genres) {\n    arrayOfGenres.push(genre.name);\n  }\n  return arrayOfGenres.join(', ');\n};\n\nasync function searchFilms(eve) {\n  eve.preventDefault();\n  try {\n    const popularFilms = await api.fetchMoviesByName(input.value, 1);\n    console.log(popularFilms);\n    const movies = popularFilms.results;\n    console.log(movies);\n    cardsFilm.innerHTML = '';\n    ids(movies).map(index => {\n      api\n        .fetchMoviesByID(index)\n        .then(film => {\n          createFilmCards(film);\n        })\n        .catch(error => console.error(error));\n    });\n  } catch (error) {\n    console.log(error);\n  }\n  input.value = '';\n}\nasync function loadPopularFilms(page) {\n  try {\n    const popularFilms = await api.fetchMovies(page);\n    const movies = popularFilms.results;\n    ids(movies).map(index => {\n      api\n        .fetchMoviesByID(index)\n        .then(film => {\n          createFilmCards(film);\n        })\n        .catch(error => console.error(error));\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function openCardFilm(eve) {\n  eve.preventDefault();\n  try {\n    const infoFilm = await api.fetchMoviesByID(eve.target.id);\n    modalCardFilm.createModalContent(infoFilm);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n/************************************************************************************************************************************************/\nloadPopularFilms();\n"],"names":["$5zJd0","parcelRequire","$1cb340a3d58589e5$var$searchForm","document","querySelector","$1cb340a3d58589e5$var$input","$1cb340a3d58589e5$var$cardsFilm","addEventListener","async","eve","preventDefault","popularFilms","fetchMoviesByName","value","console","log","movies","results","innerHTML","$1cb340a3d58589e5$var$ids","map","index","fetchMoviesByID","then","film","$1cb340a3d58589e5$var$createFilmCards","catch","error","infoFilm","target","id","$hfaIS","createModalContent","markup","poster_path","overview","title","$1cb340a3d58589e5$export$be3a0ca764f9df2b","release_date","split","insertAdjacentHTML","arrOdIds","movie","push","arrayOfGenres","genre","genres","name","join","page","fetchMovies","$1cb340a3d58589e5$var$loadPopularFilms"],"version":3,"file":"index.a71ecd7f.js.map"}