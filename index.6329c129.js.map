{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,kDASA,MAAMC,EAAaC,SAASC,cAAc,gBACpCC,EAAQF,SAASC,cAAc,uBAC/BE,EAAYH,SAASC,cAAc,kBAKzCF,EAAWK,iBAAiB,UA8C5BC,eAA2BC,GACzBA,EAAIC,iBACJ,IACE,MACMC,SADqBX,EAAAY,kBAAsBP,EAAMQ,MAAO,IAClCC,QAC5BR,EAAUS,UAAY,GACtBC,EAAIL,GAAQM,KAAIC,IACdlB,EAAAmB,gBACmBD,GAChBE,MAAKC,IACJC,EAAgBD,EAAA,IAEjBE,OAAMC,GAASC,QAAQD,MAAMA,IAAA,GAIpC,CAFE,MAAOA,GACPC,QAAQC,IAAIF,EACd,CACAnB,EAAMQ,MAAQ,EAChB,IA/DAP,EAAUC,iBAAiB,SAiF3BC,eAA4BC,GAC1BA,EAAIC,iBACJ,IACE,MAAMiB,QAAiB3B,EAAAmB,gBAAoBV,EAAImB,OAAOC,IACtDC,EAAAC,mBAAiCJ,EAGnC,CAFE,MAAOH,GACPC,QAAQC,IAAIF,EACd,CACF,IArFA,MAAMF,EAAkBD,IACtB,IAAIW,EAAShC,EAAAiC,QAAcZ,EAAKa,YACR,MAApBb,EAAKa,aAA2CC,MAApBd,EAAKa,cACnCF,EAAS,4DAGX,MAAMI,EAAS,qEAEsBJ,sCACnCX,EAAKgB,kBACMhB,EAAKgB,cAAchB,EAAKQ,kHAI7BR,EAAKgB,+EAGLC,EAAOjB,QAAWA,EAAKkB,aAAaC,MAAM,KAAK,6CAKvDlC,EAAUmC,mBAAmB,YAAaL,EAAA,EAGtCpB,EAAML,IACV,MAAM+B,EAAW,GACjB,IAAK,MAAMC,KAAShC,EAClB+B,EAASE,KAAKD,EAAMd,IAEtB,OAAOa,CAAA,EAGIJ,EAASjB,IACpB,MAAMwB,EAAgB,GACtB,IAAK,MAAMC,KAASzB,EAAK0B,OACvBF,EAAcD,KAAKE,EAAME,MAE3B,OAAOH,EAAcI,KAAK,QAsB5BzC,eAAgC0C,GAC9B,IACE,MACMvC,SADqBX,EAAAmD,YAAgBD,IACfpC,QAC5BE,EAAIL,GAAQM,KAAIC,IACdlB,EAAAmB,gBACmBD,GAChBE,MAAKC,IACJC,EAAgBD,EAAA,IAEjBE,OAAMC,GAASC,QAAQD,MAAMA,IAAA,GAIpC,CAFE,MAAOA,GACPC,QAAQC,IAAIF,EACd,CACF,CAaA4B","sources":["src/index.js"],"sourcesContent":["/************************************************************************************************************************************************/\nimport * as api from './JS/api_films_database';\nimport * as filmsCard from './JS/film_cards';\nimport * as functionsProject from './JS/info_functions';\nimport * as modalCardFilm from './JS/modal_card_film';\nimport * as studentsInfo from './JS/modal_footer';\nimport './sass/main.scss';\n\n/************************************************************************************************************************************************/\nconst searchForm = document.querySelector('#search-form');\nconst input = document.querySelector('.search-form__input');\nconst cardsFilm = document.querySelector('.section-films');\n//const studentsModal = document.querySelector('#studentsModal');\n// const spinner = document.querySelector('.loader__div');\n\n/************************************************************************************************************************************************/\nsearchForm.addEventListener('submit', searchFilms);\ncardsFilm.addEventListener('click', openCardFilm);\n//studentsModal.addEventListener('click', openCardFilm);\n/************************************************************************************************************************************************/\n\nconst createFilmCards = film => {\n  let imgSRC = api.IMG_URL + film.poster_path;\n  if (film.poster_path == null || film.poster_path == undefined) {\n    imgSRC = 'https://www.freeiconspng.com/uploads/no-image-icon-6.png';\n  }\n\n  const markup = `\n  <div class=\"film-card\">\n    <img class=\"film-card__img\" src=\"${imgSRC}\" alt=\" Poster of a movie titled '${\n    film.title\n  }'\" title=\"${film.title}\" ID=\"${film.id}\" loading=\"lazy\"/>\n\n    <div class=\"film-card__info\">\n        <p class=\"film-card__info--title\">\n        ${film.title}\n        </p>\n        <p class=\"film-card__info--subtitle\">\n        ${genres(film)} | ${film.release_date.split('-')[0]}\n        </p>\n    </div>\n</div>\n</a>`;\n  cardsFilm.insertAdjacentHTML('beforeend', markup);\n};\n\nconst ids = movies => {\n  const arrOdIds = [];\n  for (const movie of movies) {\n    arrOdIds.push(movie.id);\n  }\n  return arrOdIds;\n};\n\nexport const genres = film => {\n  const arrayOfGenres = [];\n  for (const genre of film.genres) {\n    arrayOfGenres.push(genre.name);\n  }\n  return arrayOfGenres.join(', ');\n};\n\nasync function searchFilms(eve) {\n  eve.preventDefault();\n  try {\n    const popularFilms = await api.fetchMoviesByName(input.value, 1);\n    const movies = popularFilms.results;\n    cardsFilm.innerHTML = '';\n    ids(movies).map(index => {\n      api\n        .fetchMoviesByID(index)\n        .then(film => {\n          createFilmCards(film);\n        })\n        .catch(error => console.error(error));\n    });\n  } catch (error) {\n    console.log(error);\n  }\n  input.value = '';\n}\nasync function loadPopularFilms(page) {\n  try {\n    const popularFilms = await api.fetchMovies(page);\n    const movies = popularFilms.results;\n    ids(movies).map(index => {\n      api\n        .fetchMoviesByID(index)\n        .then(film => {\n          createFilmCards(film);\n        })\n        .catch(error => console.error(error));\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function openCardFilm(eve) {\n  eve.preventDefault();\n  try {\n    const infoFilm = await api.fetchMoviesByID(eve.target.id);\n    modalCardFilm.createModalContent(infoFilm);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n/************************************************************************************************************************************************/\nloadPopularFilms();\n"],"names":["$5zJd0","parcelRequire","$1cb340a3d58589e5$var$searchForm","document","querySelector","$1cb340a3d58589e5$var$input","$1cb340a3d58589e5$var$cardsFilm","addEventListener","async","eve","preventDefault","movies","fetchMoviesByName","value","results","innerHTML","$1cb340a3d58589e5$var$ids","map","index","fetchMoviesByID","then","film","$1cb340a3d58589e5$var$createFilmCards","catch","error","console","log","infoFilm","target","id","$hfaIS","createModalContent","imgSRC","IMG_URL","poster_path","undefined","markup","title","$1cb340a3d58589e5$export$be3a0ca764f9df2b","release_date","split","insertAdjacentHTML","arrOdIds","movie","push","arrayOfGenres","genre","genres","name","join","page","fetchMovies","$1cb340a3d58589e5$var$loadPopularFilms"],"version":3,"file":"index.6329c129.js.map"}